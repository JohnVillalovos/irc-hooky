language: python
sudo: false
python:
  - "2.7"

install:
  - pip install -U twine
  - make install
  - ./env/bin/pip install coveralls

script:
  - make checkstyle
  - make test

after_success:
  - ./env/bin/coveralls

notifications:
  email: false
  irc:
    channels:
      - secure: "H5jEFtmmt5pWct/4Usr7sVmCm9bt2ffozklsjZEv3GHtJ/WQrsQEHlwsj9ID+nUKeRmCzs/9ZyuJQE5ka8yP4aQJiN8W1ofB/dXyDhSgSyLp8vxL7LEXMTkH0YeqPSpF5u6V1TybUKkyRCAdornfHbI3lWm69hNp2eEJWqlXnebg94ZTDT6H/cbI6G9IAD7b4zKwXXZvGFHDc3s3251hrqVQseK2QlCvjJz1XVl8Lys61zy4bH4jiNAWZV1TaqayGfo82BcPbgoqXXYclNYvEvl3bJwqPGcxUFf/YKjOhJj2R9HxerZ3CBbsN83JA4EW81OfSuG+I74NYQZirq8pKB3bn6vKji+mDnOCEBE32qFrKr7oo0KPmpVO8cPizKsm779FaeoLnVNeRtupTp9g2HhwftboEbzuIdbQWPTRSniHumJnVFmPigf0n8KvCEMBWnxgO5zYfj5tYqccyKrybn2PGmov4SjP0z16Y8BX7QlTeZ2KyF/opejDYFEyRNJidvKy1kp992wXnMWm+rOWYOWPd9IV7MrwO0LG+R06FcAQGzIayukOEyR0P6GsrBn4kH+f1CcuxZEBEg1mqZh5y7EFiej0N+31SPUQ/5HXOB5YLFjFzGeWzeIOgEdFRkPh/6hEbbZ2cbvtOuKs1O9h4Cb0LsgIBDhggOEMAin8stY="
    on_success: "change"
    on_failure: "change"

before_deploy:
  - make lambda

deploy:
  provider: releases
  api_key:
    secure: "SuLg+4btuMDuB4pSuRvKl7QCDNj8AFlGxHacndogBIpmbTFaVlZL+7upyK/F06lXVQz/UrUOh+CoU2FbQ07TbPCxdUej8V2QUIPuk5uaAo+Aszdn/2AoIDQBxbMIcfpc1p8yBe8PN4WcEadpqhUYjS6r6nxecDj1NqIIYv+Gnxsb6q7kfkfugjiRpcylD4byekymgKikC0a8bdongELAohaEAzSyqxi0WsSmsp+/FLQBeMhcW9LbFJ4jbO0hB/fEbvA5+4rH4Nd4wUhUklqVIlrvlVmwbSMmApjrLl/xmmVqt9+sRVg9cJM/ECxiY2g4b5Z1W+NkdltYasPh23TXE0f9iKq0S2Z1VUXPC2/iz8t4UvHrgSnmJXUHFw5r8SaUVj8+hyBZDiECE/a2osLMPhR1vmXfxEHgvfE3SeBq6T0zfnS+OnXUcsKEFmz49jPnOYKwjtGIpHQW/oYCLdKBnr1OWOvCb3oBExhQTqol5Ta9kCBLAOH966gFR7HeztmrPvreNRiz39nUj15qfEMXhxVg5hyOtiLvIRZC/Z80oXHKnqJWDDWNYP4Qrs3Qwc0kpZzBtvBd/n//FZHqo/omO8XrvWfTV1byy7CCLLI1qd8FMxDwWVvW6ZyzRPjxxt6qy4v5d77giY4xM8cVPtLCXz2e8EYNZhZF1t9Y2HKQWH8="
  file: lambda.zip
  skip_cleanup: true
  on:
    repo: marvinpinto/irc-hooky
    tags: true
